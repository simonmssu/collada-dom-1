#!/usr/bin/make
# Copyright 2006 Sony Computer Entertainment Inc.
#
# Licensed under the SCEA Shared Source License, Version 1.0 (the "License"); you may not use this 
# file except in compliance with the License. You may obtain a copy of the License at:
# http://research.scea.com/scea_shared_source_license.html
#
# Unless required by applicable law or agreed to in writing, software distributed under the License 
# is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or 
# implied. See the License for the specific language governing permissions and limitations under the 
# License. 

# target file(s)
ROOT_DIR         :=	../..
LIBRARY          := dae
OUTPUT_DIR       := $(ROOT_DIR)/lib

# definitions
include          $(ROOT_DIR)/build/makedefs.txt

# files
SRC				 := dae.cpp \
					daeArray.cpp \
					daeAtomicType.cpp \
					daeDocument.cpp \
					daeDom.cpp \
					daeElement.cpp \
					daeError.cpp \
					daeErrorHandler.cpp \
					daeIDRef.cpp \
					daeMemorySystem.cpp \
					daeMetaAny.cpp \
					daeMetaAttribute.cpp \
					daeMetaChoice.cpp \
					daeMetaCMPolicy.cpp \
					daeMetaElement.cpp \
					daeMetaElementAttribute.cpp \
					daeMetaGroup.cpp \
					daeMetaSequence.cpp \
					daeRawResolver.cpp \
					daeSIDResolver.cpp \
					daeStringRef.cpp \
					daeStringTable.cpp \
					daeURI.cpp \
					domAny.cpp \
					daeStandardURIResolver.cpp \
					daeIOPluginCommon.cpp \
					daeRefCountedObj.cpp \
					../modules/stdErrPlugin/stdErrPlugin.cpp \
					../modules/STLDatabase/daeSTLDatabase.cpp \
					../modules/LIBXMLPlugin/daeLIBXMLPlugin.cpp \
					daeTinyXMLPlugin.cpp

INCLUDE_DIR		 += $(ROOT_DIR)/include

# Do we want libxml, TinyXML, or both?
# Enable libxml by default
ifneq ($(LIBXML), 0)
CCOPT += -D"DOM_INCLUDE_LIBXML"
INCLUDE_DIR              += /usr/include/libxml2
LIBRARIES += -lxml2
endif
# Disable TinyXML by default
ifeq ($(TINYXML), 1)
CCOPT += -D"DOM_INCLUDE_TINYXML"
INCLUDE_DIR += $(ROOT_DIR)/../external-libs/tinyxml/include
LIBRARIES += $(ROOT_DIR)/../external-libs/tinyxml/lib/linux/libtinyxml.a
endif

# rules
include          $(ROOT_DIR)/build/makerules.txt
